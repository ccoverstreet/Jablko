<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel"shortcut icon" type="image/png" href="/assets/logo.png"/>

		<script>
			function change_theme() {
				document.body.classList.toggle("theme_light");
				document.body.classList.toggle("theme_dark");
			}

			function time_check() {
				const x = new Date().toLocaleTimeString("sv-SE");
				const seconds = parseInt(x.split(":")[0]) * 3600 + parseInt(x.split(":")[1]) * 60 + parseInt(x.split(":")[2]);

				if (seconds < 23400 || seconds > 72000) {
					change_theme();
					console.log("ASDAS");
				}
			}

			const jablko = {
				hsl_to_rgb: function (hsl_array) {
					const h = hsl_array[0];
					const s = hsl_array[1];
					const l = hsl_array[2];

					var C = (1 - Math.abs(2 * l - 1)) * s;
					var X = C * (1 - Math.abs((h / 60) % 2 - 1));
					var m = l - C / 2;

					var prime = [0, 0, 0]

					if (h >= 0 && h < 60) {
						prime[0] = C;
						prime[1] = X;
						prime[2] = 0;
					} else if (h >= 60 && h < 120) {
						prime[0] = X;
						prime[1] = C;
						prime[2] = 0;
					} else if (h >= 120 && h < 180) {
						prime[0] = 0;
						prime[1] = C;
						prime[2] = X;
					} else if (h >= 180 && h < 240) {
						prime[0] = 0;
						prime[1] = X;
						prime[2] = C;
					} else if (h >= 240 && h < 300) {
						prime[0] = X;
						prime[1] = 0;
						prime[2] = C;
					} else if (h >= 300 && h < 360) {
						prime[0] = C;
						prime[1] = 0;
						prime[2] = X;
					}

					return [(prime[0] + m) * 255, (prime[1] + m) * 255, (prime[2] + m) * 255];
				},
				rgb_to_hsl: function(rgb_array) {
					const r_p = rgb_array[0] / 255;
					const g_p = rgb_array[1] / 255;
					const b_p = rgb_array[2] / 255;

					const c_max = Math.max(r_p, g_p, b_p);
					const c_min = Math.min(r_p, g_p, b_p);
					const delta = c_max - c_min;

					var H = 0;
					if (c_max == r_p) {
						const k = ((g_p - b_p) / delta) % 6;
						H = (60 * k + 360) % 360;
					} else if (c_max == g_p) {
						H = 60 * (((b_p - r_p) / delta) + 2);
					} else if (c_max == b_p) {
						H = 60 * (((r_p - g_p) / delta) + 4);
					}

					const L = (c_max - c_min) / 2;

					var S = 0;
					if (delta >= 0) {
						S = delta / (1 - (2 * L - 1));
					}

					return [H, S, L];
				},
				interpolate_rgb: function(lower, rgb_1, upper, rgb_2, value) {
					// Interpolate using HSL space

					const hsl_1 = rgb_to_hsl(rgb_1);
					const hsl_2 = rgb_to_hsl(rgb_2);

					const res_hsl = [
						(hsl_2[0] - hsl_1[0]) / (upper - lower) * (value - lower) + hsl_1[0],
						(hsl_2[1] - hsl_1[1]) / (upper - lower) * (value - lower) + hsl_1[1],
						(hsl_2[2] - hsl_1[2]) / (upper - lower) * (value - lower) + hsl_1[2]
					]

					return hsl_to_rgb(res_hsl);
				}

			}

			document.addEventListener("DOMContentLoaded", (event) => {
				time_check();
			});
		</script>
	</head>

	<body class="theme_light">
		$TOOLBAR

		<div id="module_container">
			$JABLKO_MODULES
		</div>
	</body>
</html>
