<script>
	const $MODULE_ID = {
		getStatus: function() {
			fetch("/jablkomods/$MODULE_ID/getStatus", {
				method: "POST",
				headers: {
					"Content-Type": "application/json"
				}
			})
				.then(async (data) => {
					var res = await data.json();
					activeElem = document.getElementById("$MODULE_ID_active");
					if (res.active == 1) {
						activeElem.textContent = "Active!";
						activeElem.style.color = "var(--color-good)";
					} else {
						activeElem.textContent = "Hiding :/";
						activeElem.style.color = "var(--color-warn)";
					}
				})
				.catch(err => {
					console.log(err);
					activeElem = document.getElementById("$MODULE_ID_active");
					activeElem.textContent = "N/A";
					activeElem.style.color = "var(--color-bad)";
				})
		}
	}

	$MODULE_ID.getStatus();
	setInterval($MODULE_ID.getStatus, $UPDATE_INTERVAL * 1000);
</script>
<div id="$MODULE_ID" class="module_card">
	<div class="module_title">
		<div>Hamster Monitor</div>
		<svg class="module_icon" viewBox="0 0 150 150">
			<path d="M 75 130 Q -10 130 40 30 M 75 130 Q 160 130 110 30 Q 75 0 40 30" fill="transparent" stroke="var(--color-primary)" stroke-width="20px" stroke-linkjoin="round" stroke-linecap="round"/>
			<circle cx="30" cy="20" r="20px" fill="var(--color-primary)" stroke="var(--color-primary)"/>
			<circle cx="120" cy="20" r="20px" fill="var(--color-primary)" stroke="var(--color-primary)"/>
			<circle cx="60" cy="60" r="10px" fill="var(--color-primary)" stroke="var(--color-primary)"/>
			<circle cx="90" cy="60" r="10px" fill="var(--color-primary)" stroke="var(--color-primary)"/>
			<path d="M 80 100 L 100 105" stroke="var(--color-primary)" stroke-width="10px"/>
			<path d="M 70 100 L 50 105" stroke="var(--color-primary)" stroke-width="10px"/>
			<path d="M 70 90 L 50 85" stroke="var(--color-primary)" stroke-width="10px"/>
			<path d="M 80 90 L 100 85" stroke="var(--color-primary)" stroke-width="10px"/>
		</svg>
	</div>

	<hr>

	<div style="display: flex; justify-content: center; font-size: 20px;">$HAMSTER_NAME is</div>
	<div id="$MODULE_ID_active" style="display: flex; justify-content: center; font-size: 30px;">N/A</div>
</div>
